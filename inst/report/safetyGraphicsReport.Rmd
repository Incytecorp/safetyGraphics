---
output:
  html_document

params:
  data: NA
  mapping: NA
  charts: NA
---

## Customized Interactive Safety Graphics {.tabset .tabset-fade} 

```{r results='asis', echo = FALSE, message=FALSE, warning = FALSE}
library(safetyGraphics)
library(knitr)

mapping <- params$mapping
data <- params$data
for (i in seq_along(names(params$charts))){
  chart <- params$charts[[i]]
  chart_params <- makeChartParams(data, chart, mapping)
  # Make title
  cat(paste0("### ",chart$name,"\n"))

  sub_chunk <- paste0(
    "`",
    "``{r sub_chunk_", 
    floor(runif(1) * 10000), 
    ", fig.height=7, fig.width=9, echo=FALSE, message=FALSE, warning=FALSE}",
    "\n",
    "do.call(chart$functions$main, chart_params)",
    "\n`",
    "``",
    '\n'
  )

  cat(knitr::knit(
    text = knitr::knit_expand(text = sub_chunk), 
    quiet = TRUE)
  )
}

```

### Info
#### Background
The safetyGraphics package provides a framework for evaluation of clinical trial safety in R. Examples and additional documentation are available [here](https://github.com/ASA-DIA-InteractiveSafetyGraphics/safetyGraphics).

safetyGraphics is an open source project built using standard web technology and will run in any modern web browser. The displays created are all dynamically linked to raw safety data which allows the tool to work with data from any safety system. The tool was originally created using Javascript/D3, but has been extended to an R tool as well using HTML Widgets.   

